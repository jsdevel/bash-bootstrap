#!/bin/bash

if [ -d ~/.vim ];then
  read -p 'This will remove your ~/vim directory.  Proceed?[y/n]' dec
  case $dec in
    y)rm -rf ~/.vim;;
    n)echo 'Cancelling bash-bootstrap!';exit 0;;
    *)echo 'Unknown decision!';exit 1;;
  esac
fi

if [ -f ~/.vimrc ] && [ ! -f ~/.vimrc.backup ] && [ ! -h ~/.vimrc ];then
  cp ~/.vimrc ~/.vimrc.backup
  modifiedHeaderTo '"' ~/.vimrc.backup
  rm ~/.vimrc
fi

if [ -f ~/.vimrc ];then
  rm ~/.vimrc
fi

ln -s "`rPath .vimrc`" ~/.vimrc

mkdir -p ~/.vim/autoload ~/.vim/bundle 2>/dev/null

if [ ! -d ~/.vim ];then
  git clone https://github.com/jsdevel/vim-bootstrap.git ~/.vim
fi

#Prevent cd from changing the directory
(cd ~/.vim;git pull origin master;git submodule update --init);

curl -Sso ~/.vim/autoload/pathogen.vim \
    https://raw.github.com/tpope/vim-pathogen/master/autoload/pathogen.vim
